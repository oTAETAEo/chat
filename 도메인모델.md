# Chat 도메인 모델

---

### 회원(Member)
_Aggregate Root_
#### 속성
- `id` : `Long`
- `publicId` : 공개 아이디
- `email` : 이메일 - Natural ID
- `name` : 이름
- `nickname` : 별명
- `passwordHash` : 비밀번호 해시
- `birthDate` : 생년월일

#### 행위
- `static register()` : 회원 등록
  - `email`, `name`, `nickname`, `password`, `birthDate`, `passwordEncoder`
- `verifyPassword()` : 비밀번호 검증
- `changeName()` : 이름 변경
- `changeNickname()` : 별명 변경
- `changePassword()` : 비밀번호 변경
- `changeBirthDate()` : 생년월일 변경

#### 규칙
- 이름, 이메일은 고유하다
- 이름에는 영어, 언더바(_)만 사용할수 있다
- 별명이 없는 경우 이름과 같게 한다

---

### 친구 관계(Friendship)
_Aggregate Root_
#### 속성
- `id` : `Long`
- `publicId` : 공개 아이디
- `fromMember` : 친구 요청 보낸 사람
- `toMember` : 친구 요청 받은 사람
- `status` : 친구 관계 상태

#### 행위
- `static register()` : 친구 추가
    - `fromMember`, `toMember`
- `accept()` : 친구 상태를 `ACCEPTED`로 변경한다
- `block()` : 친구 상태를 `BLOCKED`로 변경한다

#### 규칙
- `status`가 `PENDING`인 경우에만 `ACCEPTED`로 변경 가능
- `status`가 `ACCEPTED`인 경우에만 `BLOCKED`로 변경 가능
- `PENDING` 상태인 친구 관계가 있으면 친구 요청을 다시 보낼수 없다
- `BLOCKED` 상태인 친구 관계가 있으면 친구 요청을 보낼수 없다

### 친구 관계 상태(FriendshipStatus)
_Enum_
#### 상수
- `PENDING` : 대기
- `ACCEPTED` : 승인
- `BLOCKED` : 차단

--- 

### 채팅 방 참여 회원(ChatRoomMember)
_Aggregate Root_
#### 속성
- `member` : (`Member` 1 :  `ChatRoomMember` n )
- `chatRoom` : (`ChatRoom` 1 : `ChatRoomMember` n )

#### 행위
- `static register()` : 채팅 방 참여 회원 생성
  - `member`, `chatRoom`

#### 규칙
- 채팅방이 생성 된 후 생성될수 있다

---

### 채팅 방(ChatRoom)
_Aggregate Root_
#### 속성
- `id` : `Long`
- `publicId` : 공개 아이디
- `roomType` : 채팅방 타입

#### 행위
- `static register()` : 채팅 방 생성
  - `roomType`

#### 규칙

### 채팅방 타입(RoomType)
_Enum_
#### 상수
- `PRIVATE` : 1대1 채팅방
- `GROUP` : 그룹 채팅방

---